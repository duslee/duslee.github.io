<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  
    
      
    

    
  

  

  
    
      
    

    
  

  
    
      
    

    
  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Lobster Two:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Blog,Source Code View,CharSequence," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="概述 该文档主要从源码角度学习CharSequence及相关内容（如SpannableString、SpannableStringBuilder、String、StringBuilder、StringBuffer等）的组织结构和实现  具体的组织结构可查看下图">
<meta name="keywords" content="Blog,Source Code View,CharSequence">
<meta property="og:type" content="article">
<meta property="og:title" content="CharSequence相关源码学习">
<meta property="og:url" content="http://yoursite.com/2018/03/26/CharSequence相关源码学习/index.html">
<meta property="og:site_name" content="Jeff&#39;s Blog">
<meta property="og:description" content="概述 该文档主要从源码角度学习CharSequence及相关内容（如SpannableString、SpannableStringBuilder、String、StringBuilder、StringBuffer等）的组织结构和实现  具体的组织结构可查看下图">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://yoursite.com/images/CharSequence/CharSequence.svg">
<meta property="og:image" content="http://yoursite.com/images/CharSequence/java-serialization.png">
<meta property="og:updated_time" content="2018-04-03T09:37:49.280Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="CharSequence相关源码学习">
<meta name="twitter:description" content="概述 该文档主要从源码角度学习CharSequence及相关内容（如SpannableString、SpannableStringBuilder、String、StringBuilder、StringBuffer等）的组织结构和实现  具体的组织结构可查看下图">
<meta name="twitter:image" content="http://yoursite.com/images/CharSequence/CharSequence.svg">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"right","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> CharSequence相关源码学习 | Jeff's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Jeff's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="#" class="st-search-show-outputs">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'zS2MTrod2Emy9CFwkkhx','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                CharSequence相关源码学习
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2018-03-26T10:26:27+08:00" content="2018-03-26">
              2018-03-26
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/learn/" itemprop="url" rel="index">
                    <span itemprop="name">learn</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/learn/Source-Code-View/" itemprop="url" rel="index">
                    <span itemprop="name">Source Code View</span>
                  </a>
                </span>

                
                
                  ， 
                

              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/learn/Source-Code-View/CharSequence/" itemprop="url" rel="index">
                    <span itemprop="name">CharSequence</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2018/03/26/CharSequence相关源码学习/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2018/03/26/CharSequence相关源码学习/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><blockquote>
<p>该文档主要从源码角度学习<code>CharSequence</code>及相关内容（如<code>SpannableString</code>、<code>SpannableStringBuilder</code>、<code>String</code>、<code>StringBuilder</code>、<code>StringBuffer</code>等）的组织结构和实现</p>
</blockquote>
<p>具体的组织结构可查看下图</p>
<p><img src="/images/CharSequence/CharSequence.svg" alt=""></p>
<a id="more"></a>
<h1 id="基础接口"><a href="#基础接口" class="headerlink" title="基础接口"></a>基础接口</h1><h2 id="CharSequence"><a href="#CharSequence" class="headerlink" title="CharSequence"></a>CharSequence</h2><ol>
<li>描述<ul>
<li><code>char</code>类型值的只读序列</li>
<li>提供统一的只读的访问方法，如长度、某位置的值、子序列的获取等</li>
<li><code>hashCode()</code>和<code>equals()</code>方法使用注意：并未重写<code>Object</code>的<code>hashCode()</code>和<code>equals()</code>方法，因此无法对实现<code>CharSequenc</code>的类进行比较；同时每个对象可以被不同的类实现，无法保证每个类可以测试相互之间实例的等同性，所以不适合使用任意的<code>CharSequence</code>实例作为<code>set</code>的元素或<code>map</code>的键值</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int length()</td>
<td>返回字符序列的长度</td>
</tr>
<tr>
<td>char charAt(int index)</td>
<td>返回指定位置处（<code>[0, length()-1]</code>）的<code>char</code>类型值</td>
</tr>
<tr>
<td>CharSequence subSequence(int start, int end)</td>
<td>返回指定范围（<code>[start, end)</code>]的字符序列</td>
</tr>
<tr>
<td>String toString()</td>
<td>返回和这个序列相同的<code>String</code>类型值</td>
</tr>
<tr>
<td>IntStream chars()</td>
<td>默认方法（<code>Java8</code>才支持）；返回这个序列<code>char</code>类型对应的<code>int</code>类型值的流</td>
</tr>
<tr>
<td>IntStream codePoints()</td>
<td>默认方法（<code>Java8</code>才支持）；返回这个序列的<code>code point</code>值的流</td>
</tr>
</tbody>
</table>
<h2 id="Appendable"><a href="#Appendable" class="headerlink" title="Appendable"></a>Appendable</h2><ol>
<li>描述<ul>
<li>可以追加<code>char</code>序列和值</li>
<li>若某实例想要接收<code>Formatter</code>格式化的输出，必须要实现<code>Appendable</code>接口</li>
<li>追加的字符应该是有效的<code>Unicode</code>字符；注意增补字符可能由多个16位<code>char</code>值组成</li>
<li><code>Appendable</code>对于多线程访问没必要是安全的，线程安全是继承或实现该接口的类的责任</li>
<li>因为此接口可能由具有不同的错误处理风格的类实现，所以无法保证错误会传递给调用者</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Appendable append(CharSequence csq)</td>
<td>追加指定的字符序列；依赖于实现字符序列<code>csq</code>的类，全部的序列可能不被追加，如<code>java.nio.CharBuffer</code>由缓存的位置和限制数决定；若<code>csq</code>为<code>null</code>，四个字符<code>“null”</code>会被追加</td>
</tr>
<tr>
<td>Appendable append(CharSequence csq, int start, int end)</td>
<td>追加指定字符序列位置处（<code>[start, end)</code>)的内容 ;若<code>csq</code>为<code>null</code>，四个字符<code>“null”</code>会被追加</td>
</tr>
<tr>
<td>Appendable append(char c)</td>
<td>追加指定的字符</td>
</tr>
</tbody>
</table>
<h2 id="Serializable"><a href="#Serializable" class="headerlink" title="Serializable"></a>Serializable</h2><h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><ul>
<li><code>Java</code>提供了一种对象序列化的机制，即对象可以表示成字节序列（或字节流），包括对象的数据、对象的类型信息和存储在对象中的数据类型<br><img src="/images/CharSequence/java-serialization.png" alt=""></li>
<li>标记接口，没有方法或域</li>
<li>没有实现该接口的类不会让任一个状态序列化或反序列化；序列化类的所有子类型都是可序列化的</li>
<li>为允许非序列化类的子类型序列化，子类型可以承担保存和恢复父类型的<code>public</code>、<code>protected</code>和<code>package</code>（如果可能的话）域的责任；子类型只有在继承类有可访问的无参构造函数初始化类的状态时，可以承担此责任</li>
<li>反序列化期间，非序列化类的域会使用<code>public</code>或<code>protected</code>的无参构造函数初始化</li>
<li><code>static</code>或<code>transient</code>修饰的数据成员不可被序列化</li>
<li>数组或集合中的序列化：要求数组中的所有对象或集合中的所有元素必须是可序列化的</li>
</ul>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><ul>
<li><strong><code>ObjectOutputStream</code></strong>：用于写基本的数据类型和<code>Java</code>对象到一个<code>OutputStream</code>；注意只有支持<code>java.io.Serializable</code>接口的对象可以被写入流</li>
</ul>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ObjectOutputStream(OutputStream out)</td>
<td>创建一个写到指定输出流的<code>ObjectOutputStream</code></td>
</tr>
<tr>
<td>final void writeObject(Object obj)</td>
<td>写指定的对象到<code>ObjectOutputStream</code></td>
</tr>
<tr>
<td>void flush()</td>
<td>冲刷当前的输出流</td>
</tr>
<tr>
<td>void close()</td>
<td>关闭当前的输出流</td>
</tr>
</tbody>
</table>
<ul>
<li><strong><code>ObjectInputStream</code></strong>：用于反序列化使用<code>ObjectOutputStream</code>写入的基本数据和对象</li>
</ul>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ObjectInputStream(InputStream in)</td>
<td>创建一个从指定的输入流读取的<code>ObjectInputStream</code></td>
</tr>
<tr>
<td>final Object readObject()</td>
<td>从输入流中读取一个对象</td>
</tr>
<tr>
<td>void close()</td>
<td>关闭当前的输入流</td>
</tr>
</tbody>
</table>
<h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><ul>
<li>如果一个序列化类没有显示定义一个<code>serialVersionUID</code>，然后序列化运行时会根据这个类的多方面因素（正如<code>Java</code>对象序列化规范里描述的那样）计算一个默认的<code>serialVersionUID</code>值</li>
<li>然而强烈推荐所有的序列化类显示定义<code>serialVersionUID</code>值，因为默认的<code>serialVersionUID</code>计算是对可能随编译器实现变化的类的详情高度敏感的，因此在反序列化期间可能导致不可预料的<code>InvalidClassException</code></li>
<li>强烈建议显示的<code>serialVersionUID</code>定义尽可能使用<code>private</code>修饰，因为这样的只用在立即定义的类的<code>serialVersionUID</code>的域上的定义不能作为继承的成员使用</li>
<li>数组类不能定义一个显示的<code>serialVersionUID</code>，所以数组只有默认的计算值</li>
<li><code>serialVersionUID</code>计算的<code>Android</code>实现会在<code>android N</code>上随着一些类轻微变化，为了保证兼容性，极力推荐使用显示的<code>serialVersionUID</code>域来避免兼容性问题</li>
</ul>
<h2 id="Comparable"><a href="#Comparable" class="headerlink" title="Comparable"></a>Comparable<t></t></h2><ol>
<li>描述<ul>
<li>此接口强加全部的排序在实现该接口的每个类对象上；这种排序被称为<code>自然排序</code>，这个类的<code>compareTo()</code>方法被称为自然排序方法</li>
<li>实现该接口的对象列表或数组可以通过<code>Collections.sort()</code>或<code>Arrays.sort()</code>方法自动排序</li>
<li>实现此接口的对象可以被用作<code>排序map</code>的键值或<code>排序set</code>的元素，没有必要指定一个<code>comparator</code></li>
<li>一个类的自然排序和<code>equals()</code>方法的一致性：有且仅有当<code>compareTo()</code>方法等于<code>0</code>，并且<code>equals()</code>方法等于<code>true</code>的时候；在<code>排序map</code>或<code>排序set</code>中强烈推荐；实际上所有实现了<code>Comparable</code>接口的<code>Java</code>核心类都有和<code>equals()</code>一致的自然排序</li>
<li><code>null</code>不是一个类，也不是一个对象，<code>compareTo(null)</code>方法会抛出<code>NullPointerException</code>，尽管<code>equals(null)</code>返回<code>false</code></li>
</ul>
</li>
<li>方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>int compareTo(T o)</td>
<td>和指定的对象进行比较；负数表示小于，0表示等于，正数表示大于</td>
</tr>
</tbody>
</table>
<h1 id="具体接口或类"><a href="#具体接口或类" class="headerlink" title="具体接口或类"></a>具体接口或类</h1><h2 id="CharSequence衍生"><a href="#CharSequence衍生" class="headerlink" title="CharSequence衍生"></a>CharSequence衍生</h2><h3 id="GetChars"><a href="#GetChars" class="headerlink" title="GetChars"></a>GetChars</h3><ol>
<li>描述<ul>
<li>用途：若<code>CharSequence</code>的实现类有<code>getChars()</code>方法，可以实现该接口</li>
<li>作用：比多次调用<code>charAt()</code>方法快得多</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>void getChars(int start, int end, char[] dest, int destoff)</td>
<td>将给定位置处（<code>[start, end)</code>）的内容拷贝到给定的数组<code>dest</code>中，其中起始位置是<code>destoff</code></td>
</tr>
</tbody>
</table>
<h3 id="AlteredCharSequence"><a href="#AlteredCharSequence" class="headerlink" title="AlteredCharSequence"></a>AlteredCharSequence</h3><ol>
<li>描述<ul>
<li>一个变化的<code>CharSequence</code>主要是另一个<code>CharSequence</code>的镜像，除了指定范围的字符是不同的字符数组的镜像</li>
</ul>
</li>
<li><p><u><font color="red">public static AlteredCharSequence make(CharSequence source, char[] sub, int substart, int subend)</font></u>：创建一个变化的<code>CharSequence</code>，其文本（可能是<code>spans</code>）来自于<code>source</code>，除了指定范围（<code>[substart, subend)</code>）处是<code>sub</code>的偏移量为<code>0</code>的镜像</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> AlteredCharSequence <span class="title">make</span><span class="params">(CharSequence source, <span class="keyword">char</span>[] sub, <span class="keyword">int</span> substart, <span class="keyword">int</span> subend)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (source <span class="keyword">instanceof</span> Spanned)</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AlteredSpanned(source, sub, substart, subend);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> AlteredCharSequence(source, sub, substart, subend);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public char charAt(int off)</font></u>：获取指定位置处的字符，注意<code>off</code>和指定字符数组提供区间<code>[start, end)</code>的关系</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">char</span> <span class="title">charAt</span><span class="params">(<span class="keyword">int</span> off)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (off &gt;= mStart &amp;&amp; off &lt; mEnd)	<span class="comment">// 获取指定字符数组sub区间内的字符</span></div><div class="line">        <span class="keyword">return</span> mChars[off - mStart];</div><div class="line">    <span class="keyword">else</span>	<span class="comment">// 获取指定CharSequence的off位置处的字符</span></div><div class="line">        <span class="keyword">return</span> mSource.charAt(off);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public void getChars(int start, int end, char[] dest, int off)</font></u>：从<code>mSource</code>中拷贝<code>[start, end)</code>范围的内容到<code>dest</code>中，注意拷贝区间和原始变化区间<code>[mStart, mEnd)</code>的关系处理</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getChars</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">char</span>[] dest, <span class="keyword">int</span> off)</span> </span>&#123;</div><div class="line">    TextUtils.getChars(mSource, start, end, dest, off);	<span class="comment">// 由mSource决定拷贝[start, end)位置处的字符到偏移量为off的dest中</span></div><div class="line"></div><div class="line">    <span class="comment">// 着重处理mChars内的拷贝：获取最大的start和最小的end，使拷贝区间尽量在[mStart, mEnd)内，便于拷贝mChars的内容到dest中</span></div><div class="line">    start = Math.max(mStart, start);</div><div class="line">    end = Math.min(mEnd, end);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (start &gt; end)</div><div class="line">        System.arraycopy(mChars, start - mStart, dest, off, end - start);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">TextUtils.getChars(CharSequence s, int start, int end, char[] dest, int destoff)</font></u>：依次判断<code>s</code>是否为<code>String</code>、<code>StringBuffer</code>、<code>StringBuilder</code>、<code>GetChars</code>的实例，若是，调用对应的<code>getChars()</code>方法即可；若不是，将<code>[start, end)</code>位置处的字符拷贝到偏移量为<code>destoff</code>的<code>dest</code>中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">getChars</span><span class="params">(CharSequence s, <span class="keyword">int</span> start, <span class="keyword">int</span> end, <span class="keyword">char</span>[] dest, <span class="keyword">int</span> destoff)</span> </span>&#123;</div><div class="line">    Class&lt;? extends CharSequence&gt; c = s.getClass();</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (c == String.class)</div><div class="line">        ((String) s).getChars(start, end, dest, destoff);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c == StringBuffer.class)</div><div class="line">        ((StringBuffer) s).getChars(start, end, dest, destoff);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (c == StringBuilder.class)</div><div class="line">        ((StringBuilder) s).getChars(start, end, dest, destoff);</div><div class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (s <span class="keyword">instanceof</span> GetChars)</div><div class="line">        ((GetChars) s).getChars(start, end, dest, destoff);</div><div class="line">    <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = start; i &lt; end; i++)</div><div class="line">            dest[destoff++] = s.charAt(i);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="AlteredCharSequence-AlteredSpanned"><a href="#AlteredCharSequence-AlteredSpanned" class="headerlink" title="AlteredCharSequence.AlteredSpanned"></a>AlteredCharSequence.AlteredSpanned</h3><p> 定义在<code>AlteredCharSequence</code>中，<code>Spanned</code>的实现类，在<code>AlteredCharSequence</code>的基础上附加了<code>Spanned</code>的相关功能</p>
<h2 id="Spanned系列"><a href="#Spanned系列" class="headerlink" title="Spanned系列"></a>Spanned系列</h2><h3 id="Spanned"><a href="#Spanned" class="headerlink" title="Spanned"></a>Spanned</h3><ol>
<li>描述<ul>
<li>用于让标记对象绑定到文本的某范围的文本的接口；并不是所有的类都有可变的标记或文本</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><t> T[] getSpans(int start, int end, Class<t> type)</t></t></td>
<td>返回一个绑定指定类型的<code>CharSequence</code>或其子类的切片的标记对象数组；也可直接指定<code>Object.class</code>，不管任何类型</td>
</tr>
<tr>
<td>int getSpanStart(Object tag)</td>
<td>返回指定标记对象绑定的文本范围的开始位置；若对象没有绑定，返回<code>-1</code></td>
</tr>
<tr>
<td>int getSpanEnd(Object tag)</td>
<td>返回指定标记对象绑定的文本范围的结束位置；若对象没有绑定，返回<code>-1</code></td>
</tr>
<tr>
<td>int getSpanFlags(Object tag)</td>
<td>返回当使用<code>Spannable.setSpan</code>绑定指定的标记对象时指定的<code>flags</code>，若指定的对象未被绑定，这里返回<code>0</code></td>
</tr>
<tr>
<td>int nextSpanTransition(int start, int limit, Class type)</td>
<td>返回第一个大于<code>type</code>类型标记对象开始或结束处的给定的<code>start</code>值，否则如果没有开始或结束值比给定的<code>start</code>值大，但是小于给定的<code>limit</code>，则返回该<code>limit</code>；可直接指定<code>null</code>或<code>Object.class</code>，不管任何类型</td>
</tr>
</tbody>
</table>
<h3 id="SpannableStringInternal"><a href="#SpannableStringInternal" class="headerlink" title="SpannableStringInternal"></a>SpannableStringInternal</h3><ol>
<li>描述<ul>
<li>对<a href="#SpannedString"><code>SpannedString</code></a>和<a href="#SpannableString"><code>SpannableString</code></a>的抽象封装而成</li>
</ul>
</li>
<li><strong>待补充</strong></li>
</ol>
<h3 id="SpannedString"><a href="#SpannedString" class="headerlink" title="SpannedString"></a>SpannedString</h3><ol>
<li>描述<ul>
<li>文本的内容和标记对象都是不可变的</li>
</ul>
</li>
<li><p><u><font color="red">public CharSequence subSequence(int start, int end)</font></u>：根据给定的<code>[start, end]</code>范围获取<code>SpannedString</code>实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> CharSequence <span class="title">subSequence</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SpannedString(<span class="keyword">this</span>, start, end);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public static SpannedString valueOf(CharSequence source)</font></u>：根据给定的<code>CharSequence</code>类型获取<code>SpannedString</code>实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SpannedString <span class="title">valueOf</span><span class="params">(CharSequence source)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (source <span class="keyword">instanceof</span> SpannedString) &#123;</div><div class="line">        <span class="keyword">return</span> (SpannedString) source;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SpannedString(source);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="Spannable"><a href="#Spannable" class="headerlink" title="Spannable"></a>Spannable</h3><ol>
<li>描述<ul>
<li>用于标记对象可以绑定和解绑的文本的接口；并不是所有的类都有可变的文本，如<a href="#Editable"><code>Editable</code></a></li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>void setSpan(Object what, int start, int end, int flags)</td>
<td>绑定指定的标记对象到文本的<code>[start, end]</code>范围处，或若标记对象已绑定了，则移除对应范围内的标记对象</td>
</tr>
<tr>
<td>void removeSpan(Object what)</td>
<td>从指定标记对象绑定的文本范围内移除该标记对象；第一次移除从未绑定的标记对象总是可行的</td>
</tr>
</tbody>
</table>
<h3 id="Spannable-Factory"><a href="#Spannable-Factory" class="headerlink" title="Spannable.Factory"></a>Spannable.Factory</h3><ol>
<li>描述<ul>
<li>用于<code>TextView</code>创建<code>Spannable</code>实例</li>
<li>可以通过继承该类实现除<code>SpannableString</code>的其它类</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>static Spannable.Factory getInstance()</td>
<td>返回标准的<code>Spannable</code>工厂实例</td>
</tr>
<tr>
<td>Spannable newSpannable(CharSequence source)</td>
<td>根据给定的<code>CharSequence</code>提供<code>SpannableString</code>实例；可以重写该方法提供其它的<code>Spannable</code>类型</td>
</tr>
</tbody>
</table>
<h3 id="SpannableString"><a href="#SpannableString" class="headerlink" title="SpannableString"></a>SpannableString</h3><ol>
<li>描述<ul>
<li>文本的内容是不可变的，文本的标记对象是可以绑定和解绑的</li>
</ul>
</li>
<li><p><u><font color="red">public CharSequence subSequence(int start, int end)</font></u>：根据给定的<code>[start, end]</code>范围获取<code>SpannableString</code>实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> CharSequence <span class="title">subSequence</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> SpannableString(<span class="keyword">this</span>, start, end);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public static SpannableString valueOf(CharSequence source)</font></u>：根据给定的<code>CharSequence</code>类型获取<code>SpannableString</code>实例</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SpannableString <span class="title">valueOf</span><span class="params">(CharSequence source)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (source <span class="keyword">instanceof</span> SpannableString) &#123;</div><div class="line">        <span class="keyword">return</span> (SpannableString) source;</div><div class="line">    &#125; <span class="keyword">else</span> &#123;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">new</span> SpannableString(source);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><strong>注意</strong>：提供了公共的<code>setSpan()</code>和<code>removeSpan()</code>方法用于绑定和解绑标记对象</p>
</li>
</ol>
<h3 id="Editable"><a href="#Editable" class="headerlink" title="Editable"></a>Editable</h3><ol>
<li>描述<ul>
<li>文本的内容和标记对象均可变化，与<code>String</code>不可变的文本形成对比</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Editable replace(int st, int en, CharSequence source, int start, int end)</td>
<td>用给定<code>source</code>的<code>start... end</code>范围内的文本拷贝来替换该<code>Editable</code>中指定<code>st...en</code>范围的文本。当目标片段为空时，该方法表示插入操作；或源片段为空时，该方法表示删除操作。在变化发送之前，使用<code>setFilters(InputFilter[])</code>方法设置的过滤器可以帮助修改<code>source</code>的文本</td>
</tr>
<tr>
<td>Editable replace(int st, int en, CharSequence text)</td>
<td>等同于<code>replace(st, en, text, 0, text.length())</code></td>
</tr>
<tr>
<td>Editable insert(int where, CharSequence text, int start, int end)</td>
<td>等同于<code>replace(where, where, text, start, end)</code></td>
</tr>
<tr>
<td>Editable insert(int where, CharSequence text)</td>
<td>等同于<code>replace(where, where, text, 0, text.length())</code></td>
</tr>
<tr>
<td>Editable delete(int st, int en)</td>
<td>等同于<code>replace(st, en, &quot;&quot;, 0, 0)</code></td>
</tr>
<tr>
<td>Editable append(CharSequence text)</td>
<td>等同于<code>replace(length(), length(), text, 0, text.length())</code></td>
</tr>
<tr>
<td>Editable append(CharSequence text, int start, int end)</td>
<td>等同于<code>replace(length(), length(), text, start, end)</code></td>
</tr>
<tr>
<td>Editable append(char text)</td>
<td>等同于<code>append(String.valueOf(text))</code></td>
</tr>
<tr>
<td>void clear()</td>
<td>等同于<code>replace(0, length(), &quot;&quot;, 0, 0)</code>，注意该方法只清除文本，并不是<code>spans</code></td>
</tr>
<tr>
<td>void clearSpans()</td>
<td>移除该<code>Editable</code>的所有<code>spans</code></td>
</tr>
<tr>
<td>void setFilters(InputFilter[] filters)</td>
<td>设置一系列无论何时该<code>Editable</code>的文本变化时会成功调用的过滤器，每个过滤器可以限制或变换被插入的文本</td>
</tr>
<tr>
<td>InputFilter[] getFilters()</td>
<td>返回当前应用于该<code>Editable</code>的过滤器数组</td>
</tr>
</tbody>
</table>
<h3 id="Editable-Factory"><a href="#Editable-Factory" class="headerlink" title="Editable.Factory"></a>Editable.Factory</h3><ol>
<li>描述<ul>
<li>用于<code>TextView</code>创建<code>Editable</code>实例</li>
<li>可以通过继承该类实现除<code>SpannableStringBuilder</code>的其它类</li>
</ul>
</li>
<li>具体方法</li>
</ol>
<table>
<thead>
<tr>
<th>Method</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>static Editable.Factory getInstance()</td>
<td>返回标准的<code>Editable</code>实例</td>
</tr>
<tr>
<td>Editable newEditable(CharSequence source)</td>
<td>根据给定的<code>CharSequence</code>创建<code>SpannableStringBuilder</code>实例</td>
</tr>
</tbody>
</table>
<h3 id="GraphicsOperations"><a href="#GraphicsOperations" class="headerlink" title="GraphicsOperations"></a>GraphicsOperations</h3><ol>
<li>描述<ul>
<li>如果<code>CharSequence</code>能够做快速的绘制、测量、宽度计算，可以实现该接口</li>
<li>其方法和<code>Canvas</code>、<code>Paint</code>的方法类似</li>
</ul>
</li>
</ol>
<h3 id="SpannableStringBuilder"><a href="#SpannableStringBuilder" class="headerlink" title="SpannableStringBuilder"></a>SpannableStringBuilder</h3><ol>
<li>描述<ul>
<li>文本的内容和标记对象都是可变的</li>
</ul>
</li>
<li><strong>待补充</strong></li>
</ol>
<h2 id="String系列"><a href="#String系列" class="headerlink" title="String系列"></a>String系列</h2><h3 id="String"><a href="#String" class="headerlink" title="String"></a>String</h3><ol>
<li>描述<ul>
<li><code>Java</code>程序中所有字符串字面量，如<code>“abc”</code>作为<code>String</code>类的实例实现</li>
<li>字符串是常量，创建后不能被修改</li>
<li><code>String</code>包含有比较、搜索、提取子字符串、转换为大写或小写的字符串拷贝等方法</li>
<li>支持字符串拼接（<code>+</code>）操作，方便其它对象转换为字符串；通过<a href="#StringBuilder"><code>StringBuilder</code></a>或<a href="#StringBuffer"><code>StringBuffer</code></a>类和它们的<code>append()</code>方法实现字符串拼接；通过对象的<code>toString()</code>（由<code>Object</code>定义，其子类重写）方法实现转换</li>
<li>传递<code>null</code>参数给<code>String</code>的构造函数或方法会抛出<code>NullPointerException</code></li>
<li><code>String</code>代表了增补的字符由代理对来表示的<code>UTF-16</code>格式的字符串，指数值引用了<code>char</code>的代码单位，所以在一个字符串中一个增补的字符使用了两个位置</li>
<li><code>String</code>提供了处理<code>Unicode</code>代码点（如<code>character</code>类型）的方法，除了处理<code>Unicode</code>代码单元（如<code>char</code>类型值）</li>
</ul>
</li>
<li></li>
</ol>
<h3 id="AbstractStringBuilder"><a href="#AbstractStringBuilder" class="headerlink" title="AbstractStringBuilder"></a>AbstractStringBuilder</h3><ol>
<li>描述<ul>
<li>可变的字符序列</li>
<li><a href="#StringBuilder"><code>StringBuilder</code></a>或<a href="#StringBuffer"><code>StringBuffer</code></a>类的抽象类</li>
<li>通过某些调用方法可以修改序列的长度和内容</li>
<li>传递<code>null</code>参数给构造函数或方法会抛出<code>NullPointerException</code></li>
</ul>
</li>
<li><p><u><font color="red">public void ensureCapacity(int minimumCapacity)</font></u>：确保容量至少等于提供的最小值。如果当前容量小于提供的最小值，一个新的内部数组会使用新的容量进行分配，其中新的容量是提供的最小值和当前容量的2倍再加2的值中的更大的一个</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ensureCapacity</span><span class="params">(<span class="keyword">int</span> minimumCapacity)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (minimumCapacity &gt; <span class="number">0</span>)	<span class="comment">// 只有在提供参数大于0时才可实现容量扩大操作</span></div><div class="line">        ensureCapacityInternal(minimumCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">private void ensureCapacityInternal(int minimumCapacity)</font></u>：比较提供的最小容量和内部数组的长度，若大于0，根据提供的最小容量扩大内部的容量，否则什么也不做</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ensureCapacityInternal</span><span class="params">(<span class="keyword">int</span> minimumCapacity)</span> </span>&#123;</div><div class="line">    <span class="comment">// overflow-conscious code</span></div><div class="line">    <span class="keyword">if</span> (minimumCapacity - value.length &gt; <span class="number">0</span>)	<span class="comment">// 提供参数大于内部数组长度时才可实现容量扩大操作</span></div><div class="line">        expandCapacity(minimumCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">void expandCapacity(int minimumCapacity)</font></u>：实现容量扩大，并完成字符串的拷贝。注意当计算并比较后的最大容量小于0，也就是溢出，并且提供的最小容量值也小于0时，会抛出内存溢出异常</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">void</span> <span class="title">expandCapacity</span><span class="params">(<span class="keyword">int</span> minimumCapacity)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> newCapacity = value.length * <span class="number">2</span> + <span class="number">2</span>;</div><div class="line">    <span class="keyword">if</span> (newCapacity - minimumCapacity &lt; <span class="number">0</span>)	<span class="comment">// 在当前容量基础上扩大后的容量值仍小于提供的最小容量值</span></div><div class="line">        newCapacity = minimumCapacity;</div><div class="line">    <span class="keyword">if</span> (newCapacity &lt; <span class="number">0</span>) &#123;	<span class="comment">// 经比较后的新容量值溢出时</span></div><div class="line">    	<span class="comment">// 若提供的最小容量值小于0，会直接抛出内存溢出异常</span></div><div class="line">        <span class="keyword">if</span> (minimumCapacity &lt; <span class="number">0</span>) <span class="comment">// overflow</span></div><div class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> OutOfMemoryError();</div><div class="line">        <span class="comment">// 否则设置新容量为最大整型值</span></div><div class="line">        newCapacity = Integer.MAX_VALUE;</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 拷贝内部数组[0,Math.min(count, newCapacity))区间的内容</span></div><div class="line">    value = Arrays.copyOf(value, newCapacity);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public void setLength(int newLength)</font></u>：设置字符序列的长度为提供的参数。若提供的长度小于当前的长度，该字符序列的长度变为提供的长度；若提供的长度大于当前的长度，追加额外的空字符（<code>‘\0’</code>）以便该字符序列的长度变为提供的长度</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setLength</span><span class="params">(<span class="keyword">int</span> newLength)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (newLength &lt; <span class="number">0</span>)	<span class="comment">// 提供的长度不准小于0</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(newLength);</div><div class="line">    ensureCapacityInternal(newLength);	<span class="comment">// 完成原有内部容量的扩大操作</span></div><div class="line">    <span class="comment">// 若内部内容长度小于提供的参数时，填充‘\0‘到内部数组的[count, newLength)区间处</span></div><div class="line">    <span class="keyword">if</span> (count &lt; newLength) &#123;</div><div class="line">        Arrays.fill(value, count, newLength, <span class="string">'\0'</span>);</div><div class="line">    &#125;</div><div class="line">    <span class="comment">// 设置该字符序列的内容长度为提供的长度</span></div><div class="line">    count = newLength;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public void getChars(int srcBegin, int srcEnd, char[] dst, int dstBegin)</font></u>：拷贝字符序列<code>[srcBegin, srcEnd)</code>位置处的内容到提供的<code>dst</code>数组中的偏移量<code>destBegin</code>处。注意拷贝之前对提供参数所进行的严格判断（提供指数超过数组界线异常问题）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getChars</span><span class="params">(<span class="keyword">int</span> srcBegin, <span class="keyword">int</span> srcEnd, <span class="keyword">char</span>[] dst, <span class="keyword">int</span> dstBegin)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="keyword">if</span> (srcBegin &lt; <span class="number">0</span>)	<span class="comment">// 拷贝的起始位置不能小于0</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(srcBegin);</div><div class="line">    <span class="keyword">if</span> ((srcEnd &lt; <span class="number">0</span>) || (srcEnd &gt; count))	<span class="comment">// 拷贝的结束位置不能小于0 或者 拷贝的结束为止不能大于内部内容长度</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(srcEnd);</div><div class="line">    <span class="keyword">if</span> (srcBegin &gt; srcEnd)	<span class="comment">// 拷贝的起始位置不能大于结束位置</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(<span class="string">"srcBegin &gt; srcEnd"</span>);</div><div class="line">    <span class="comment">// 拷贝内部数组[srcBegin, srcEnd)区间处的内容到数组dst的[dstBegin, dstBegin+srcBegin-srcEnd)区间处</span></div><div class="line">    System.arraycopy(value, srcBegin, dst, dstBegin, srcEnd - srcBegin);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public AbstractStringBuilder append(String str)</font></u>：追加提供的字符串到该字符序列。若提供的<code>str</code>为<code>null</code>，追加<code>“null”</code>内容。注意追加内容后会根据提供内容的长度来增加该字符序列的长度，所以需要完成相应的容量扩大和内容长度设置操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">append</span><span class="params">(String str)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span>)	<span class="comment">// 追加“null”内容</span></div><div class="line">        <span class="keyword">return</span> appendNull();</div><div class="line">    <span class="keyword">int</span> len = str.length();</div><div class="line">    ensureCapacityInternal(count + len);	<span class="comment">// 完成原有内部容量的扩大操作</span></div><div class="line">    str.getChars(<span class="number">0</span>, len, value, count);	<span class="comment">// 拷贝str内容到内部数组的[count, count+len)区间处</span></div><div class="line">    count += len;	<span class="comment">// 在原有内容长度基础上增加提供内容的长度</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">private AbstractStringBuilder appendNull()</font></u>：完成<code>“null”</code>内容的追加操作</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> AbstractStringBuilder <span class="title">appendNull</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> c = count;</div><div class="line">    ensureCapacityInternal(c + <span class="number">4</span>);	<span class="comment">// 完成原有内部容量的扩大操作</span></div><div class="line">    <span class="keyword">final</span> <span class="keyword">char</span>[] value = <span class="keyword">this</span>.value;</div><div class="line">    <span class="comment">// 在原有内部数组基础上追加内容，注意指数的自加操作的安全性（因为在内部容量扩大的基础上）</span></div><div class="line">    value[c++] = <span class="string">'n'</span>;</div><div class="line">    value[c++] = <span class="string">'u'</span>;</div><div class="line">    value[c++] = <span class="string">'l'</span>;</div><div class="line">    value[c++] = <span class="string">'l'</span>;</div><div class="line">    count = c;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public AbstractStringBuilder delete(int start, int end)</font></u>：移除该字符序列<code>[start, end)</code>位置处的内容</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">delete</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &lt; <span class="number">0</span>)	<span class="comment">// 起始位置不能小于0</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(start);</div><div class="line">    <span class="keyword">if</span> (end &gt; count)	<span class="comment">// 保证结束位置的有效性（比较提供的结束位置和内部内容的长度）</span></div><div class="line">        end = count;</div><div class="line">    <span class="keyword">if</span> (start &gt; end)	<span class="comment">// 起始位置不能大于结束位置</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException();</div><div class="line">    <span class="keyword">int</span> len = end - start;</div><div class="line">    <span class="keyword">if</span> (len &gt; <span class="number">0</span>) &#123;	<span class="comment">// 移除合理的区间[start, end)处的内容，注意内部内容长度的设置操作（减少了len的长度）</span></div><div class="line">        System.arraycopy(value, start+len, value, start, count-end);</div><div class="line">        count -= len;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public AbstractStringBuilder replace(int start, int end, String str)</font></u>：使用提供的字符串<code>str</code>来替换该字符序列的给定区间<code>[start, end)</code>处的字符</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">replace</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end, String str)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &lt; <span class="number">0</span>)	<span class="comment">// 起始位置不能小于0</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(start);</div><div class="line">    <span class="keyword">if</span> (start &gt; count)	<span class="comment">// 起始位置不能大于内部内容长度</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(<span class="string">"start &gt; length()"</span>);</div><div class="line">    <span class="keyword">if</span> (start &gt; end)	<span class="comment">// 起始位置不能大于结束位置</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(<span class="string">"start &gt; end"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (end &gt; count)	<span class="comment">// 结束位置大于内部内容长度时，修改结束位置为内部内容最后位置处</span></div><div class="line">        end = count;</div><div class="line">    <span class="keyword">int</span> len = str.length();</div><div class="line">    <span class="keyword">int</span> newCount = count + len - (end - start);</div><div class="line">    ensureCapacityInternal(newCount);	<span class="comment">// 变换原有内部容量操作</span></div><div class="line">    <span class="comment">// 直接拷贝内部数组[end, count)区间处的内容到扩大后的内部容量的[start+len, newCount)区间处</span></div><div class="line">    System.arraycopy(value, end, value, start + len, count - end);</div><div class="line">    str.getChars(value, start);	<span class="comment">// 直接拷贝str到[start, start+len)区间处</span></div><div class="line">    count = newCount;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public String substring(int start, int end)</font></u>：创建提供<code>[start, end)</code>区间参数处的字符序列的字符串</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">substring</span><span class="params">(<span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (start &lt; <span class="number">0</span>)	<span class="comment">// 起始位置不能小于0</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(start);</div><div class="line">    <span class="keyword">if</span> (end &gt; count)	<span class="comment">// 结束位置不能大于内部内容长度</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(end);</div><div class="line">    <span class="keyword">if</span> (start &gt; end)	<span class="comment">// 起始位置不能大于结束位置</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(end - start);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(value, start, end - start);	<span class="comment">// 创建由[start, end)区间处的字符序列组成的字符串</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public AbstractStringBuilder insert(int index, char[] str, int offset, int len)</font></u>：将提供的数组<code>str</code>偏移量<code>offset</code>开始<code>len</code>长度的内容插入到该字符序列的<code>index</code>位置处</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">insert</span><span class="params">(<span class="keyword">int</span> index, <span class="keyword">char</span>[] str, <span class="keyword">int</span> offset, <span class="keyword">int</span> len)</span></span></div><div class="line"><span class="function"></span>&#123;</div><div class="line">    <span class="keyword">if</span> ((index &lt; <span class="number">0</span>) || (index &gt; length()))	<span class="comment">// 插入位置不能小于0 或者 大于内部容量</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(index);</div><div class="line">    <span class="comment">// 拷贝的偏移量不能小于0 或者 拷贝内容的长度不能小于0 或者 拷贝的偏移量不能大于所拷贝内容的长度与欲拷贝的长度差值</span></div><div class="line">    <span class="keyword">if</span> ((offset &lt; <span class="number">0</span>) || (len &lt; <span class="number">0</span>) || (offset &gt; str.length - len))</div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(</div><div class="line">            <span class="string">"offset "</span> + offset + <span class="string">", len "</span> + len + <span class="string">", str.length "</span></div><div class="line">            + str.length);</div><div class="line">    ensureCapacityInternal(count + len);	<span class="comment">// 完成扩大内部容量操作</span></div><div class="line">    <span class="comment">// 拷贝内部数组[index, count)区间处的内容到[index+len, count+len)区间处</span></div><div class="line">    System.arraycopy(value, index, value, index + len, count - index);</div><div class="line">    <span class="comment">// 拷贝数组str[offset, len)区间处的内容到内部数组[index, index+len)区间处</span></div><div class="line">    System.arraycopy(str, offset, value, index, len);</div><div class="line">    count += len;	<span class="comment">// 在原有内部内容长度基础上增加插入内容长度</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public AbstractStringBuilder insert(int offset, String str)</font></u>：将提供的字符串<code>str</code>插入到该字符序列的<code>offset</code>位置处</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> AbstractStringBuilder <span class="title">insert</span><span class="params">(<span class="keyword">int</span> offset, String str)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> ((offset &lt; <span class="number">0</span>) || (offset &gt; length()))	<span class="comment">// 偏移量不能小于0 或者 不能大于内部容量</span></div><div class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> StringIndexOutOfBoundsException(offset);</div><div class="line">    <span class="keyword">if</span> (str == <span class="keyword">null</span>)	<span class="comment">// 若提供参数为null，插入“null”字符串</span></div><div class="line">        str = <span class="string">"null"</span>;</div><div class="line">    <span class="keyword">int</span> len = str.length();</div><div class="line">    ensureCapacityInternal(count + len);	<span class="comment">// 完成扩大内部容量操作</span></div><div class="line">    <span class="comment">// 拷贝内部数组[offset, count)区间处的内容到[offset+len, count+len)区间处</span></div><div class="line">    System.arraycopy(value, offset, value, offset + len, count - offset);</div><div class="line">    str.getChars(value, offset);	<span class="comment">// 拷贝提供的字符串到[offset, offset+len)区间处</span></div><div class="line">    count += len;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">this</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public AbstractStringBuilder reverse()</font></u>：<strong>待补充</strong></p>
</li>
</ol>
<h3 id="StringBuilder"><a href="#StringBuilder" class="headerlink" title="StringBuilder"></a>StringBuilder</h3><ol>
<li>描述<ul>
<li>可变的字符序列</li>
<li>兼容<a href="#StringBuffer"><code>StringBuffer</code></a>，但不能保证同步</li>
<li>该类被设计用于字符串缓存在单线程使用时用于<code>StringBuffer</code>的混乱信息替换</li>
<li>该类相对于<code>StringBuffer</code>被推荐使用，因为其大多情况下更快</li>
<li><u><font color="red">重载<code>append</code>、<code>insert</code>等方法，支持任意类型数据</font></u></li>
<li><code>StringBulder</code>实例在多线程场景中不安全</li>
</ul>
</li>
<li><u><font color="red">public String toString()</font></u>：重写<code>toString()</code>方法<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="comment">// Create a copy, don't share the array</span></div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(value, <span class="number">0</span>, count);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="StringBuffer"><a href="#StringBuffer" class="headerlink" title="StringBuffer"></a>StringBuffer</h3><ol>
<li>描述<ul>
<li>线程安全、可变的字符序列</li>
<li>可通过某些方法调用实现字符序列长度和内容的修改</li>
<li><u><font color="red">重载<code>append</code>、<code>insert</code>等方法，支持任意类型数据</font></u></li>
</ul>
</li>
<li><p><u><font color="red">toStringCache</font></u>：<code>transient</code>变量，用于缓存<code>toString()</code>方法拷贝的该类的内部数组，当被修改时会被清空</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"><span class="comment"> * A cache of the last value returned by toString. Cleared</span></div><div class="line"><span class="comment"> * whenever the StringBuffer is modified.</span></div><div class="line"><span class="comment"> */</span></div><div class="line"><span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">char</span>[] toStringCache;</div></pre></td></tr></table></figure>
</li>
<li><p><u><font color="red">public synchronized String toString()</font></u>：重写<code>toString()</code>方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (toStringCache == <span class="keyword">null</span>) &#123;</div><div class="line">        toStringCache = Arrays.copyOfRange(value, <span class="number">0</span>, count);</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="keyword">new</span> String(toStringCache, <span class="keyword">true</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ol>
<h1 id="参考方案"><a href="#参考方案" class="headerlink" title="参考方案"></a>参考方案</h1><ol>
<li><a href="https://developer.android.com/reference/java/lang/CharSequence.html?hl=zh-cn" target="_blank" rel="external"><strong>CharSequence API</strong></a></li>
<li><a href="https://www.tutorialspoint.com/java/java_serialization.htm" target="_blank" rel="external"><strong>Java - Serializable</strong></a></li>
<li><a href="https://www.javatpoint.com/serialization-in-java" target="_blank" rel="external"><strong>Serializable in Java</strong></a></li>
<li><a href="https://dzone.com/articles/java-comparable-interface-in-five-minutes" target="_blank" rel="external"><strong>Java Comparable Interface in Five Minutes</strong></a></li>
<li><a href="https://www.javatpoint.com/Comparable-interface-in-collection-framework" target="_blank" rel="external"><strong>Java Comparable interface</strong></a></li>
<li><a href="https://blog.csdn.net/u011240877/article/details/53399019" target="_blank" rel="external"><strong>Java 解惑：Comparable 和 Comparator 的区别</strong></a></li>
<li><a href="https://takeoffandroid.com/android-spannable-text-view-to-change-color-size-style-and-adding-click-event-for-particular-word-8acd8a05ec61" target="_blank" rel="external"><strong>Android Spannable text view to change color, size, style and adding click event for particular word</strong></a></li>
<li><a href="https://www.jianshu.com/p/1956e15c9a27" target="_blank" rel="external"><strong>其实你不懂：Android之Spanned flag</strong></a></li>
</ol>

      
    </div>

    <div>
      
        
      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Blog/" rel="tag">#Blog</a>
          
            <a href="/tags/Source-Code-View/" rel="tag">#Source Code View</a>
          
            <a href="/tags/CharSequence/" rel="tag">#CharSequence</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2017/09/28/Mac下常用终端命令备忘录/" rel="next" title="Mac下常用终端命令备忘录">
                <i class="fa fa-chevron-left"></i> Mac下常用终端命令备忘录
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/04/02/System-java-源码学习/" rel="prev" title="System.java 源码学习">
                System.java 源码学习 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="2018/03/26/CharSequence相关源码学习/"
           data-title="CharSequence相关源码学习" data-url="http://yoursite.com/2018/03/26/CharSequence相关源码学习/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/my_avatar.jpg"
               alt="Jeff" />
          <p class="site-author-name" itemprop="name">Jeff</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">23</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">30</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#概述"><span class="nav-number">1.</span> <span class="nav-text">概述</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#基础接口"><span class="nav-number">2.</span> <span class="nav-text">基础接口</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CharSequence"><span class="nav-number">2.1.</span> <span class="nav-text">CharSequence</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Appendable"><span class="nav-number">2.2.</span> <span class="nav-text">Appendable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Serializable"><span class="nav-number">2.3.</span> <span class="nav-text">Serializable</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#描述"><span class="nav-number">2.3.1.</span> <span class="nav-text">描述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用"><span class="nav-number">2.3.2.</span> <span class="nav-text">使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注意"><span class="nav-number">2.3.3.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Comparable"><span class="nav-number">2.4.</span> <span class="nav-text">Comparable</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#具体接口或类"><span class="nav-number">3.</span> <span class="nav-text">具体接口或类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#CharSequence衍生"><span class="nav-number">3.1.</span> <span class="nav-text">CharSequence衍生</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#GetChars"><span class="nav-number">3.1.1.</span> <span class="nav-text">GetChars</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AlteredCharSequence"><span class="nav-number">3.1.2.</span> <span class="nav-text">AlteredCharSequence</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AlteredCharSequence-AlteredSpanned"><span class="nav-number">3.1.3.</span> <span class="nav-text">AlteredCharSequence.AlteredSpanned</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Spanned系列"><span class="nav-number">3.2.</span> <span class="nav-text">Spanned系列</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spanned"><span class="nav-number">3.2.1.</span> <span class="nav-text">Spanned</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpannableStringInternal"><span class="nav-number">3.2.2.</span> <span class="nav-text">SpannableStringInternal</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpannedString"><span class="nav-number">3.2.3.</span> <span class="nav-text">SpannedString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spannable"><span class="nav-number">3.2.4.</span> <span class="nav-text">Spannable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spannable-Factory"><span class="nav-number">3.2.5.</span> <span class="nav-text">Spannable.Factory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpannableString"><span class="nav-number">3.2.6.</span> <span class="nav-text">SpannableString</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Editable"><span class="nav-number">3.2.7.</span> <span class="nav-text">Editable</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Editable-Factory"><span class="nav-number">3.2.8.</span> <span class="nav-text">Editable.Factory</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GraphicsOperations"><span class="nav-number">3.2.9.</span> <span class="nav-text">GraphicsOperations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SpannableStringBuilder"><span class="nav-number">3.2.10.</span> <span class="nav-text">SpannableStringBuilder</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String系列"><span class="nav-number">3.3.</span> <span class="nav-text">String系列</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#String"><span class="nav-number">3.3.1.</span> <span class="nav-text">String</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AbstractStringBuilder"><span class="nav-number">3.3.2.</span> <span class="nav-text">AbstractStringBuilder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StringBuilder"><span class="nav-number">3.3.3.</span> <span class="nav-text">StringBuilder</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#StringBuffer"><span class="nav-number">3.3.4.</span> <span class="nav-text">StringBuffer</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#参考方案"><span class="nav-number">4.</span> <span class="nav-text">参考方案</span></a></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeff</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"duslee"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  






  
  
  

  

  

</body>
</html>
